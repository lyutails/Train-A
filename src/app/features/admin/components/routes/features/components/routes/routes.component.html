<div class="routes_wrapper container-xl">
  <TTP-button
    (click)="showCreateForm()"
    [type]="'button'"
    [width]="'10vw'"
    [buttonText]="'Create'"
    class="routes_create-button"
  >
  </TTP-button>

  @if (isFormVisible) {
    <form [formGroup]="createRouteForm" class="routes_form">
      <div class="routes_form-columns">
        <div class="routes_form-section">
          <h6>Stations</h6>
        </div>
        <div class="routes_form-section">
          <h6>Carriages</h6>
          <div formArrayName="carriages"></div>
        </div>
      </div>
      <div class="routes_form-buttons">
        <TTP-button
          (click)="handleFormSubmit()"
          [type]="'submit'"
          [width]="'10vw'"
          [buttonText]="'Save'"
          class="routes_save-button"
          [disabled]="!createRouteForm.valid"
        >
        </TTP-button>
        <TTP-button
          (click)="handleCancel()"
          [type]="'button'"
          [width]="'10vw'"
          [buttonText]="'Cancel'"
          class="routes_cancel-button"
        >
        </TTP-button>
      </div>
    </form>
  }

  @if (routes.length > 0) {
    <div class="routes_data">
      @for (route of routes; track route) {
        <div class="routes_data-card">
          <h4 class="routes_title">Route {{ route.id }}</h4>
          <p><strong>Cities:</strong> {{ route.path.join(' - ') }}</p>
          <p><strong>Carriage Types:</strong> {{ route.carriages.join(', ') }}</p>
          <div class="routes_buttons">
            <button mat-button class="routes_update-btn">
              <mat-icon>edit</mat-icon>
              <span class="routes_btn-description">Update</span>
            </button>
            <button mat-button class="routes_assign-btn">
              <mat-icon>assignment</mat-icon>
              <span class="routes_btn-description">Assign Ride</span>
            </button>
            <button class="routes_delete-btn" mat-icon-button (click)="openDeleteModal(route.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      }
    </div>
  }
</div>
